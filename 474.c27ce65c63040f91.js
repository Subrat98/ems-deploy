"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[474],{3474:(j,c,i)=>{i.r(c),i.d(c,{TypographyComponent:()=>b});var e=i(4438),s=i(4341),p=i(177),h=i(3878),u=i(5794),g=i(6554),y=i(3525),d=i(980);function f(n,m){if(1&n&&e.nrm(0,"img",36),2&n){const t=e.XpG();e.Y8G("src",t.imagePreview,e.B4B)}}function F(n,m){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"button",37),e.bIt("click",function(){const r=e.eBV(t).index,a=e.XpG();return e.Njj(a.openEditModal(r))}),e.EFF(13,"Edit"),e.k0s(),e.j41(14,"button",38),e.bIt("click",function(){const r=e.eBV(t).index,a=e.XpG();return e.Njj(a.deleteEmployee(r))}),e.EFF(15,"Delete"),e.k0s()()()}if(2&n){const t=m.$implicit;e.R7$(2),e.JRh(t.employeeId),e.R7$(2),e.JRh(t.fullName),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.department),e.R7$(2),e.JRh(t.skill)}}function E(n,m){1&n&&(e.j41(0,"tr")(1,"td",39),e.EFF(2,"No matching employee found."),e.k0s()())}function k(n,m){if(1&n&&e.nrm(0,"img",61),2&n){const t=e.XpG(2);e.Y8G("src",t.imagePreview,e.B4B)}}function _(n,m){if(1&n){const t=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43)(4,"h5",44),e.EFF(5,"Edit Employee"),e.k0s(),e.j41(6,"button",45),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeModal())}),e.k0s()(),e.j41(7,"div",46)(8,"form",47)(9,"div",6)(10,"div",7)(11,"label",8),e.EFF(12,"Full Name"),e.k0s(),e.nrm(13,"input",48),e.k0s(),e.j41(14,"div",7)(15,"label",8),e.EFF(16,"Email"),e.k0s(),e.nrm(17,"input",49),e.k0s()(),e.j41(18,"div",6)(19,"div",7)(20,"label",8),e.EFF(21,"Employee ID"),e.k0s(),e.nrm(22,"input",50),e.k0s(),e.j41(23,"div",7)(24,"label",8),e.EFF(25,"Phone"),e.k0s(),e.nrm(26,"input",51),e.k0s()(),e.j41(27,"div",6)(28,"div",7)(29,"label",8),e.EFF(30,"Current Address"),e.k0s(),e.nrm(31,"textarea",52),e.k0s(),e.j41(32,"div",7)(33,"label",8),e.EFF(34,"Permanent Address"),e.k0s(),e.nrm(35,"textarea",53),e.k0s()(),e.j41(36,"div",6)(37,"div",7)(38,"label",8),e.EFF(39,"Aadhar Number"),e.k0s(),e.nrm(40,"input",54),e.k0s(),e.j41(41,"div",7)(42,"label",8),e.EFF(43,"Department"),e.k0s(),e.nrm(44,"input",55),e.k0s()(),e.j41(45,"div",6)(46,"div",7)(47,"label",8),e.EFF(48,"Skill"),e.k0s(),e.nrm(49,"input",56),e.k0s(),e.j41(50,"div",7)(51,"label",8),e.EFF(52,"Aadhar Image Proof"),e.k0s(),e.j41(53,"input",15),e.bIt("change",function(r){e.eBV(t);const a=e.XpG();return e.Njj(a.onAadharImageSelect(r))}),e.k0s(),e.DNE(54,k,1,1,"img",57),e.k0s()()()(),e.j41(55,"div",58)(56,"button",59),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeModal())}),e.EFF(57,"Cancel"),e.k0s(),e.j41(58,"button",60),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onSubmit())}),e.EFF(59,"Save Changes"),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(8),e.Y8G("formGroup",t.employeeForm),e.R7$(46),e.Y8G("ngIf",t.imagePreview)}}let b=(()=>{class n{constructor(){this.employeeService=(0,e.WQX)(h.O),this.toastr=(0,e.WQX)(u.tw),this.spinner=(0,e.WQX)(g.ex),this.fb=(0,e.WQX)(s.ok),this.imageSelected=!1,this.imagePreview=null,this.editingIndex=null,this.showModal=!1,this.isLoading=!1,this.currentPage=1,this.itemsPerPage=10,this.totalItems=0,this.searchTerm="",this.totalPages=1,this.employees=[],this.filteredEmployees=[],this.departments=["IT","HR","Finance","Marketing","Operations"],this.skills=["Development","Design","Testing","DevOps","Management"],this.employeeForm=this.fb.group({fullName:["",[s.k0.required,s.k0.pattern(/^[A-Za-z\s]+$/),s.k0.maxLength(15)]],email:["",[s.k0.required,s.k0.email,s.k0.maxLength(50)]],employeeId:["EmployeeID",[s.k0.required,s.k0.pattern(/^[A-Za-z0-9]+$/),s.k0.maxLength(10)]],phone:["",[s.k0.required,s.k0.pattern(/^[0-9]{10}$/)]],currentAddress:["",[s.k0.required,s.k0.pattern(/^[A-Za-z0-9\s,\/\-:&']+$/),s.k0.maxLength(100)]],permanentAddress:["",[s.k0.required,s.k0.pattern(/^[A-Za-z0-9\s,\/\-:&']+$/),s.k0.maxLength(100)]],aadharNo:["",[s.k0.required,s.k0.pattern(/^[0-9]{12}$/)]],aadharImageProof:[null],department:["",s.k0.required],skill:["",s.k0.required]})}ngOnInit(){this.loadEmployees()}loadEmployees(){this.spinner.show(),this.employeeService.getEmployees(this.currentPage,this.itemsPerPage,this.searchTerm).pipe((0,d.j)(()=>this.spinner.hide())).subscribe({next:t=>{const o=t.data?.employees||[],r=t.data?.pagination||{};this.employees=o,this.filteredEmployees=[...this.employees],this.totalItems=r.total||0,this.totalPages=r.pages||1,this.searchTerm&&this.onSearch()},error:t=>{console.error("Error loading employees:",t),this.toastr.error("Failed to load employees","Error")}})}onPageChange(t){this.currentPage=t,this.loadEmployees()}onSearch(){if(!this.searchTerm)return void(this.filteredEmployees=[...this.employees]);const t=this.searchTerm.toLowerCase();this.filteredEmployees=this.employees.filter(o=>o.fullName?.toLowerCase().includes(t)||o.employeeId?.toLowerCase().includes(t)||o.email?.toLowerCase().includes(t))}onAadharImageSelect(t){const o=t.target;if(o.files&&o.files.length>0){const r=o.files[0];if(!r.type.match("image.*"))return void this.toastr.error("Only image files are allowed","Invalid File");if(r.size>2097152)return void this.toastr.error("Image size should not exceed 2MB","File Too Large");const a=new FileReader;a.onload=()=>{const l=a.result;this.employeeForm.patchValue({aadharImageProof:l}),this.imagePreview=l,this.imageSelected=!0},a.readAsDataURL(r)}}removeImage(){this.employeeForm.patchValue({image:null}),this.imagePreview=null,this.imageSelected=!1}copyAddress(t){if(t.target.checked){const o=this.employeeForm.get("currentAddress")?.value;this.employeeForm.patchValue({permanentAddress:o})}}onSubmit(){if(this.employeeForm.invalid)return this.employeeForm.markAllAsTouched(),void this.toastr.warning("Please fill out all required fields correctly","Validation Error");this.spinner.show();const t=null!==this.editingIndex,o=t?this.employees[this.editingIndex].id:null,r={...this.employeeForm.getRawValue()};t||delete r.employeeId,(t?this.employeeService.updateEmployee(o,r):this.employeeService.createEmployee(r)).pipe((0,d.j)(()=>this.spinner.hide())).subscribe({next:l=>{this.toastr.success(`Employee ${t?"updated":"created"} successfully!`,"Success"),this.resetForm(),this.loadEmployees()},error:l=>{console.error("Error saving employee:",l),this.toastr.error(l.error?.message||"An error occurred while saving the employee","Error")}})}openEditModal(t){const o=this.filteredEmployees[t];this.editingIndex=t,this.employeeForm.patchValue({fullName:o.fullName,email:o.email,employeeId:o.employeeId,phone:o.phone,currentAddress:o.currentAddress,permanentAddress:o.permanentAddress,aadharNo:o.aadharNo,department:o.department,skill:o.skill}),o.aadharImageProof?(this.imagePreview=o.aadharImageProof,this.imageSelected=!0):(this.imagePreview=null,this.imageSelected=!1),this.employeeForm.get("employeeId")?.disable(),this.showModal=!0}deleteEmployee(t){const o=this.filteredEmployees[t];o&&o.id?confirm(`Are you sure you want to delete ${o.fullName}?`)&&(this.spinner.show(),this.employeeService.deleteEmployee(o.id).pipe((0,d.j)(()=>this.spinner.hide())).subscribe({next:()=>{this.toastr.success("Employee deleted successfully","Success"),this.loadEmployees()},error:r=>{console.error("Error deleting employee:",r),this.toastr.error(r.error?.message||"Failed to delete employee","Error")}})):this.toastr.error("Invalid employee data","Error")}exportToCsv(){this.spinner.show(),this.employeeService.exportToCsv().pipe((0,d.j)(()=>this.spinner.hide())).subscribe({next:t=>{const o=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(o),a=document.createElement("a"),l=(new Date).toISOString().split("T")[0];a.href=r,a.download=`employees_export_${l}.csv`,a.click(),window.URL.revokeObjectURL(r),this.toastr.success("Employee data exported successfully","Success")},error:t=>{console.error("Error exporting to CSV:",t),this.toastr.error("Failed to export employee data","Error")}})}getPageNumbers(){const t=[];let r=Math.max(1,this.currentPage-Math.floor(2.5));const a=Math.min(this.totalPages,r+5-1);a-r+1<5&&(r=Math.max(1,a-5+1));for(let l=r;l<=a;l++)t.push(l);return t}resetForm(){this.employeeForm.reset(),this.employeeForm.get("employeeId")?.enable(),this.editingIndex=null,this.imagePreview=null,this.imageSelected=!1,this.showModal=!1}closeModal(){this.employeeForm.dirty?confirm("You have unsaved changes. Are you sure you want to close?")&&this.resetForm():this.resetForm()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-typography"]],decls:97,vars:6,consts:[[1,"container","my-5"],[1,"text-xl","font-bold","mb-4"],[1,"card","p-4","mb-4","shadow","rounded"],[1,"mb-3","font-semibold"],["enctype","multipart/form-data","novalidate","",3,"ngSubmit","formGroup"],["type","hidden","formControlName","employeeId"],[1,"row","mb-3"],[1,"col"],[1,"form-label"],["type","text","formControlName","fullName","placeholder","Full Name","maxlength","15","pattern","^[A-Za-z\\s]+$","title","Only letters and spaces, max 15 characters",1,"form-control"],["type","email","formControlName","email","placeholder","Email Address","maxlength","50","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","title","Enter a valid email address (e.g., name@example.com)",1,"form-control"],["type","text","formControlName","phone","placeholder","Phone Number","maxlength","10","pattern","^[0-9]{10}$","title","Enter a valid 10-digit phone number",1,"form-control"],["formControlName","currentAddress","rows","2","placeholder","Current Address...","maxlength","100","pattern","^[A-Za-z0-9\\s,\\/\\-:&]+$","title","Letters, numbers, spaces, / , - : & (max 100 characters)",1,"form-control"],["formControlName","permanentAddress","rows","2","placeholder","Permanent Address...","maxlength","100","pattern","^[A-Za-z0-9\\s,\\/\\-:&]+$","title","Letters, numbers, spaces, / , - : & (max 100 characters)",1,"form-control"],["type","text","formControlName","aadharNo","placeholder","Aadhar No.","maxlength","12","pattern","^[0-9]{12}$","title","Enter 12-digit Aadhar number",1,"form-control"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","mt-2","width","100",3,"src",4,"ngIf"],["formControlName","department",1,"form-select"],["value",""],["value","HR"],["value","IT"],["value","Finance"],["value","Operations"],["formControlName","skill",1,"form-select"],["value","Web Development"],["value","Mobile Development"],["value","Business Analytics"],["value","Backend Programming"],["value","Testing Methodologies"],["type","submit",1,"btn","btn-primary"],[1,"card","p-4","shadow","rounded"],["type","text","placeholder","Search by name or ID","name","search",1,"form-control","mb-3",3,"ngModelChange","input","ngModel"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","modal fade show d-block","tabindex","-1","style","background-color: rgba(0,0,0,0.5);",4,"ngIf"],["width","100",1,"mt-2",3,"src"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["colspan","6",1,"text-center","text-muted"],["tabindex","-1",1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],["formControlName","fullName","placeholder","Name",1,"form-control"],["formControlName","email","placeholder","Email",1,"form-control"],["formControlName","employeeId","placeholder","ID","readonly","",1,"form-control"],["formControlName","phone","placeholder","Phone",1,"form-control"],["formControlName","currentAddress","placeholder","Current Address",1,"form-control"],["formControlName","permanentAddress","placeholder","Permanent Address",1,"form-control"],["formControlName","aadharNo","placeholder","Aadhar Number",1,"form-control"],["formControlName","department","placeholder","Department",1,"form-control"],["formControlName","skill","placeholder","Skill",1,"form-control"],["alt","Preview","class","mt-2","width","100",3,"src",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["alt","Preview","width","100",1,"mt-2",3,"src"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Employee Management"),e.k0s(),e.j41(3,"div",2)(4,"h5",3),e.EFF(5,"Add / Edit Employee"),e.k0s(),e.j41(6,"form",4),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.nrm(7,"input",5),e.j41(8,"div",6)(9,"div",7)(10,"label",8),e.EFF(11,"Employee Name*"),e.k0s(),e.nrm(12,"input",9),e.k0s(),e.j41(13,"div",7)(14,"label",8),e.EFF(15,"Employee Gmail*"),e.k0s(),e.nrm(16,"input",10),e.k0s()(),e.j41(17,"div",6)(18,"div",7)(19,"label",8),e.EFF(20,"Mobile Number*"),e.k0s(),e.nrm(21,"input",11),e.k0s(),e.j41(22,"div",7)(23,"label",8),e.EFF(24,"Current Address*"),e.k0s(),e.nrm(25,"textarea",12),e.k0s()(),e.j41(26,"div",6)(27,"div",7)(28,"label",8),e.EFF(29,"Permanent Address*"),e.k0s(),e.nrm(30,"textarea",13),e.k0s(),e.j41(31,"div",7)(32,"label",8),e.EFF(33,"Aadhar Number*"),e.k0s(),e.nrm(34,"input",14),e.k0s()(),e.j41(35,"div",6)(36,"div",7)(37,"label",8),e.EFF(38,"Aadhar Image Proof*"),e.k0s(),e.j41(39,"input",15),e.bIt("change",function(l){return r.onAadharImageSelect(l)}),e.k0s(),e.DNE(40,f,1,1,"img",16),e.k0s(),e.j41(41,"div",7)(42,"label",8),e.EFF(43,"Department*"),e.k0s(),e.j41(44,"select",17)(45,"option",18),e.EFF(46,"Select Department"),e.k0s(),e.j41(47,"option",19),e.EFF(48,"HR"),e.k0s(),e.j41(49,"option",20),e.EFF(50,"IT"),e.k0s(),e.j41(51,"option",21),e.EFF(52,"Finance"),e.k0s(),e.j41(53,"option",22),e.EFF(54,"Operations"),e.k0s()()()(),e.j41(55,"div",6)(56,"div",7)(57,"label",8),e.EFF(58,"Skill*"),e.k0s(),e.j41(59,"select",23)(60,"option",18),e.EFF(61,"Select Skill"),e.k0s(),e.j41(62,"option",24),e.EFF(63,"Web Development"),e.k0s(),e.j41(64,"option",25),e.EFF(65,"Mobile Development"),e.k0s(),e.j41(66,"option",26),e.EFF(67,"Business Analytics"),e.k0s(),e.j41(68,"option",27),e.EFF(69,"Backend Programming"),e.k0s(),e.j41(70,"option",28),e.EFF(71,"Testing Methodologies"),e.k0s()()()(),e.j41(72,"button",29),e.EFF(73,"Save Employee"),e.k0s()()(),e.j41(74,"div",30)(75,"h5",3),e.EFF(76,"Employee Directory"),e.k0s(),e.j41(77,"input",31),e.mxI("ngModelChange",function(l){return e.DH7(r.searchTerm,l)||(r.searchTerm=l),l}),e.bIt("input",function(){return r.onSearch()}),e.k0s(),e.j41(78,"table",32)(79,"thead")(80,"tr")(81,"th"),e.EFF(82,"Employee ID"),e.k0s(),e.j41(83,"th"),e.EFF(84,"Name"),e.k0s(),e.j41(85,"th"),e.EFF(86,"Email"),e.k0s(),e.j41(87,"th"),e.EFF(88,"Department"),e.k0s(),e.j41(89,"th"),e.EFF(90,"Skill"),e.k0s(),e.j41(91,"th"),e.EFF(92,"Actions"),e.k0s()()(),e.j41(93,"tbody"),e.DNE(94,F,16,5,"tr",33)(95,E,3,0,"tr",34),e.k0s()()(),e.DNE(96,_,60,2,"div",35),e.k0s()),2&o&&(e.R7$(6),e.Y8G("formGroup",r.employeeForm),e.R7$(34),e.Y8G("ngIf",r.imagePreview),e.R7$(37),e.R50("ngModel",r.searchTerm),e.R7$(17),e.Y8G("ngForOf",r.filteredEmployees),e.R7$(),e.Y8G("ngIf",0===r.filteredEmployees.length),e.R7$(),e.Y8G("ngIf",r.showModal))},dependencies:[p.MD,p.Sq,p.bT,s.YN,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.tU,s.R_,s.vS,s.X1,s.j4,s.JD,y.c9],encapsulation:2})}}return n})()}}]);